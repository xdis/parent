<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zyxy.common.mapper.LabourRealNameAuthRecordMapper">
    <resultMap id="BaseResultMap" type="com.zyxy.common.domain.LabourRealNameAuthRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="ID" jdbcType="VARCHAR" property="id"/>
        <result column="ID_CARD" jdbcType="VARCHAR" property="idCard"/>
        <result column="CURRENT_OWNER" jdbcType="VARCHAR" property="currentOwner"/>
        <result column="STATUS" jdbcType="CHAR" property="status"/>
        <result column="CREATER_ID" jdbcType="VARCHAR" property="createrId"/>
        <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="AUDIT_TIME" jdbcType="TIMESTAMP" property="auditTime"/>
    </resultMap>
    <sql id="Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Update_By_Example_Where_Clause">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <where>
            <foreach collection="example.oredCriteria" item="criteria" separator="or">
                <if test="criteria.valid">
                    <trim prefix="(" prefixOverrides="and" suffix=")">
                        <foreach collection="criteria.criteria" item="criterion">
                            <choose>
                                <when test="criterion.noValue">
                                    and ${criterion.condition}
                                </when>
                                <when test="criterion.singleValue">
                                    and ${criterion.condition} #{criterion.value}
                                </when>
                                <when test="criterion.betweenValue">
                                    and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                                </when>
                                <when test="criterion.listValue">
                                    and ${criterion.condition}
                                    <foreach close=")" collection="criterion.value" item="listItem" open="("
                                             separator=",">
                                        #{listItem}
                                    </foreach>
                                </when>
                            </choose>
                        </foreach>
                    </trim>
                </if>
            </foreach>
        </where>
    </sql>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        ID, ID_CARD, CURRENT_OWNER, STATUS, CREATER_ID, CREATE_TIME, AUDIT_TIME
    </sql>
    <select id="selectByExample" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecordExample"
            resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <if test="distinct">
            distinct
        </if>
        <include refid="Base_Column_List"/>
        from labour_real_name_auth_record
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
        <if test="orderByClause != null">
            order by ${orderByClause}
        </if>
    </select>
    <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select
        <include refid="Base_Column_List"/>
        from labour_real_name_auth_record
        where ID = #{id,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from labour_real_name_auth_record
        where ID = #{id,jdbcType=VARCHAR}
    </delete>
    <delete id="deleteByExample" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecordExample">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        delete from labour_real_name_auth_record
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </delete>
    <insert id="insert" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into labour_real_name_auth_record (ID, ID_CARD, CURRENT_OWNER,
        STATUS, CREATER_ID, CREATE_TIME,
        AUDIT_TIME)
        values (#{id,jdbcType=VARCHAR}, #{idCard,jdbcType=VARCHAR}, #{currentOwner,jdbcType=VARCHAR},
        #{status,jdbcType=CHAR}, #{createrId,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP},
        #{auditTime,jdbcType=TIMESTAMP})
    </insert>
    <insert id="insertSelective" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into labour_real_name_auth_record
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                ID,
            </if>
            <if test="idCard != null">
                ID_CARD,
            </if>
            <if test="currentOwner != null">
                CURRENT_OWNER,
            </if>
            <if test="status != null">
                STATUS,
            </if>
            <if test="createrId != null">
                CREATER_ID,
            </if>
            <if test="createTime != null">
                CREATE_TIME,
            </if>
            <if test="auditTime != null">
                AUDIT_TIME,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=VARCHAR},
            </if>
            <if test="idCard != null">
                #{idCard,jdbcType=VARCHAR},
            </if>
            <if test="currentOwner != null">
                #{currentOwner,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                #{status,jdbcType=CHAR},
            </if>
            <if test="createrId != null">
                #{createrId,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="auditTime != null">
                #{auditTime,jdbcType=TIMESTAMP},
            </if>
        </trim>
    </insert>
    <select id="countByExample" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecordExample"
            resultType="java.lang.Integer">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        select count(*) from labour_real_name_auth_record
        <if test="_parameter != null">
            <include refid="Example_Where_Clause"/>
        </if>
    </select>
    <update id="updateByExampleSelective" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update labour_real_name_auth_record
        <set>
            <if test="record.id != null">
                ID = #{record.id,jdbcType=VARCHAR},
            </if>
            <if test="record.idCard != null">
                ID_CARD = #{record.idCard,jdbcType=VARCHAR},
            </if>
            <if test="record.currentOwner != null">
                CURRENT_OWNER = #{record.currentOwner,jdbcType=VARCHAR},
            </if>
            <if test="record.status != null">
                STATUS = #{record.status,jdbcType=CHAR},
            </if>
            <if test="record.createrId != null">
                CREATER_ID = #{record.createrId,jdbcType=VARCHAR},
            </if>
            <if test="record.createTime != null">
                CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="record.auditTime != null">
                AUDIT_TIME = #{record.auditTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByExample" parameterType="map">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update labour_real_name_auth_record
        set ID = #{record.id,jdbcType=VARCHAR},
        ID_CARD = #{record.idCard,jdbcType=VARCHAR},
        CURRENT_OWNER = #{record.currentOwner,jdbcType=VARCHAR},
        STATUS = #{record.status,jdbcType=CHAR},
        CREATER_ID = #{record.createrId,jdbcType=VARCHAR},
        CREATE_TIME = #{record.createTime,jdbcType=TIMESTAMP},
        AUDIT_TIME = #{record.auditTime,jdbcType=TIMESTAMP}
        <if test="_parameter != null">
            <include refid="Update_By_Example_Where_Clause"/>
        </if>
    </update>
    <update id="updateByPrimaryKeySelective" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update labour_real_name_auth_record
        <set>
            <if test="idCard != null">
                ID_CARD = #{idCard,jdbcType=VARCHAR},
            </if>
            <if test="currentOwner != null">
                CURRENT_OWNER = #{currentOwner,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                STATUS = #{status,jdbcType=CHAR},
            </if>
            <if test="createrId != null">
                CREATER_ID = #{createrId,jdbcType=VARCHAR},
            </if>
            <if test="createTime != null">
                CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="auditTime != null">
                AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP},
            </if>
        </set>
        where ID = #{id,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.zyxy.common.domain.LabourRealNameAuthRecord">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        update labour_real_name_auth_record
        set ID_CARD = #{idCard,jdbcType=VARCHAR},
        CURRENT_OWNER = #{currentOwner,jdbcType=VARCHAR},
        STATUS = #{status,jdbcType=CHAR},
        CREATER_ID = #{createrId,jdbcType=VARCHAR},
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
        AUDIT_TIME = #{auditTime,jdbcType=TIMESTAMP}
        where ID = #{id,jdbcType=VARCHAR}
    </update>

	<!-- 用户身份审核列表 -->
	<select id="queryRealUserAuditList" resultType="com.zyxy.common.vo.RealUserAuditVO">
		SELECT
			lr.id id,
			lr.id_card idCard,
			lr.status status,
			li.name createrName,
			lr.create_time createTime,
			li.card_image_front cardImageFront,
			li.card_image_con cardImageCon,
			li.card_id cardId
		FROM
			labour_real_name_auth_record lr,
			litigant_info li
		WHERE
			lr.creater_id = li.user_id
			 <if test="propName!=null and propName!='' ">
			      AND li.name=#{propName}
			 </if>
			 <if test="cardId!=null and cardId!='' ">
			      AND lr.id_card=#{cardId}
			 </if>
			 <if test="status!=null and status!='' ">
			      AND lr.status=#{status}
			 </if>
			order by lr.create_time DESC
	</select>
	
	
	<update id="updateUserAudit">
		UPDATE labour_real_name_auth_record
		SET current_owner = #{currentOwner},
		 status = #{status},
		 audit_time=#{auditTime}
		WHERE
			status = ${@com.zyxy.common.enums.CaseApproveStatusEnum@WAIT_AUDIT.getValue()}
			AND id=#{id}
    </update>
</mapper>